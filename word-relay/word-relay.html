<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>끝말잇기</title>
  </head>
  <body>
    <div><span id="order">1</span>번째 참가자</div>
    <div>제시어: <span id="word"></span></div>
    <input type="text">
    <button>입력</button>
      <script>
      const number = Number(prompt('참가자는 몇명인가요?'));
      const $input = document.querySelector('input');
      const $button = document.querySelector('button');
      const $word = document.querySelector('#word');
      const $order = document.querySelector('#order');
      let newWord; //현재 단어
      let word; //제시어
      const onInput = (event) => {
        newWord = event.target.value;
      };

      const onKeyDown = (event) => {
        if (event.key === 'Enter') {
          onClickButton();
        }
      };
    
      const onClickButton = () => {
        if (!word || word.at(-1) === newWord[0]){
          word = newWord;
          $word.textContent = word;
          const order = Number($order.textContent);
          if (order +1 > number){ //마지막 순서 
            $order.textContent = 1;
          } else {
            $order.textContent = order + 1;
          }
        // console.log('버튼클릭');
        // if (!word) {
        //   word = newWord;
        //   $word.textContent = word;
        //   const order = Number($order.textContent);
        //   if (order +1 > number){ //마지막 순서 
        //     $order.textContent = 1;
        //   } else {
        //     $order.textContent = order + 1;
        //   }
        //   $input.value = ''; 
        //   $input.focus();
        // } else {
        //   if (word.at(-1) === newWord[0]){
        //     word = newWord;
        //     $word.textContent = word;
        //     const order = Number($order.textContent);
        //     if (order +1 > number){ //마지막 순서 
        //       $order.textContent = 1;
        //     } else {
        //       $order.textContent = order + 1;
        //     }
        //     $input.value = '';
        //     $input.focus();
          } else {
            alert('틀린 단어입니다!');
          }
          $input.value = '';
          $input.focus();
        };
      $input.addEventListener('input', onInput);
      $input.addEventListener('keydown', onKeyDown); 
      $button.addEventListener('click',onClickButton);
      </script>
  </body>
</html>